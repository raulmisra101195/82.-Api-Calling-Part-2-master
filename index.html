<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>API Calling </title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>
    <body>
        <div class="d-flex justify-content-center">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <table class="table">
            <thead>
              <tr>
// The scope attribute specifies whether a header cell is a header for a column, row, or group of columns or rows.
// The scope attribute has no visual effect in ordinary web browsers, but can be used by screen readers.

                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Username</th>
                <th scope="col">Email</th>
                <th scope="col">Address</th>
                <th scope="col">Phone</th>
                <th scope="col">Website</th>
                <th scope="col">Company</th>
              </tr>
            </thead>
            <tbody>
              
            </tbody>
          </table>    

        <script>
            //Lets create our own class i.e user defined class

            class MyClass{ //Pascal Case
                //1. Property

                //2. Constructor


                //3. Method
                sum(a,b){ // a and b are formal argument

                    return a+b;
                }
            }

            //2. Let create a object from the MyClass

            //let object = new ClassName();
            let anil = new MyClass();

            //How you can access the method?
           let result = anil.sum(10,20);

           console.log('result ', result);

        </script>
        <script>


            //Function Callback

            //1. function defination

            //cbfn
            function getUserInfo(object,cbfn){//object and cbfn is a formal agr

                 //1. Lets create xhr object from XMLHttpRequest Class
                //let object = new ClassName();
                // To send a request to a server, we use the open() and send() methods of the XMLHttpRequest object:
                let xhr = new XMLHttpRequest(); // XMLHttpRequest is predefined class
                xhr.open(object.method,object.url);
                xhr.send();


                //onload->A callback function is a function passed as a parameter to another function.
                //In this case, the callback function should contain the code to execute when the response is ready.
                //responseText ->get the response data as a string
                xhr.onload = function(){
                    console.log(xhr);
                    //console.log(xhr.responseText);
                    cbfn(xhr.responseText);
                   
                }


                

               

            }
            //2. Funciton calling

            getUserInfo({url:'https://jsonplaceholder.typicode.com/users',method:"GET"},function(response){
                console.log(response);
                console.log(typeof response);
                response = JSON.parse(response);
                    // parse is used to convert JSON object to JSON string
                console.log(response);
                console.log(typeof response);
                var tr = '';
                response.forEach((currentElement,index,arr) => {
                    console.log(currentElement);
                    console.log(currentElement.name);
                    tr += `<tr>
                                    <th scope="row">`+currentElement.id+`</th>
                                    <td>`+currentElement.name+`</td>
                                    <td>`+currentElement.username+`</td>
                                    <td>`+currentElement.email+`</td>
                                    <th scope="row">`+currentElement.address+`</th>
                                    <td>`+currentElement.phone+`</td>
                                    <td>`+currentElement.website+`</td>
                                    <td>`+currentElement.company+`</td>
                                </tr>`
                });

                console.log(tr);
                document.querySelector('table > tbody').innerHTML = tr;

                document.querySelector('div.d-flex.justify-content-center').remove();

            }); // actual argument
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    </body>
</html>
